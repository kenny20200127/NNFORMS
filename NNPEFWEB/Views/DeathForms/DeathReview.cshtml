@model NNPEFWEB.Models.DeathModel
@{
    ViewData["Title"] = "DeathReview";
    Layout = "~/Views/Shared/_DeathGratuityLayout.cshtml";
}

<div class="card" style="width:100%;">
    <div class="card-header">
        <h1>Death Gratuity Review</h1>
    </div>
    <div class="card-body">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Fullname</th>
                    <th>ServiceNo</th>
                    <th>Rank</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @{

                    string fullname = "";

                    @foreach (var k in Model.deaths)
                    {
                        fullname = k.LastName + " " + k.FirstName;
                        <tr>
                            <td>@fullname</td>
                            <td>@k.SVC_NO</td>
                            <td>@k.Title</td>
                            <td>
                                <a onclick="getDeath(@k.personID)"
                                   class="btn btn-primary">
                                    preview
                                </a>
                            </td>
                        </tr>
                    }
                }

            </tbody>
        </table>

        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <form id="savePension" method="post">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Pension Preview</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <section class="signup-step-container">
                                <div class="container">
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-md-8">
                                            <div class="wizard">
                                                <div class="wizard-inner">
                                                    <div class="connecting-line"></div>
                                                    <ul class="nav nav-tabs" role="tablist">
                                                        <li role="presentation" class="active">
                                                            <a href="#step1" data-toggle="tab" aria-controls="step1" role="tab" aria-expanded="true"><span class="round-tab">1 </span> <i>Step 1</i></a>
                                                        </li>
                                                        <li role="presentation" class="disabled">
                                                            <a href="#step2" data-toggle="tab" aria-controls="step2" role="tab" aria-expanded="false"><span class="round-tab">2</span> <i>Step 2</i></a>
                                                        </li>
                                                        <li role="presentation" class="disabled">
                                                            <a href="#step3" data-toggle="tab" aria-controls="step3" role="tab"><span class="round-tab">3</span> <i>Step 3</i></a>
                                                        </li>
                                                        <li role="presentation" class="disabled">
                                                            <a href="#step4" data-toggle="tab" aria-controls="step4" role="tab"><span class="round-tab">4</span> <i>Step 4</i></a>
                                                        </li>
                                                    </ul>
                                                </div>

                                                <form role="form" class="login-box">
                                                    <input id="currentTabId" type="hidden" />
                                                    <div class="tab-content" id="main_form">
                                                        <div class="tab-pane active" role="tabpanel" id="step1">
                                                            <h4 class="text-center">Step 1</h4>
                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>SERVICE NO</label>
                                                                        <input asp-for="death.SVC_NO" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>FIRSTNAME</label>
                                                                        <input asp-for="death.FirstName" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>LASTNAME</label>
                                                                        <input asp-for="death.LastName" class="form-control" type="email" name="name" placeholder="">
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>MIDDLENAME</label>
                                                                        <input asp-for="death.MiddleName" class="form-control" placeholder="">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>RANK</label>
                                                                        <input asp-for="death.Title" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>SHIP</label>
                                                                        <input asp-for="death.ShipEstab" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>DATE OF BIRTH</label>
                                                                        <input asp-for="death.BirthDate" class="form-control" type="email" name="name" placeholder="">
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>SENIORITY RATE</label>
                                                                        <input asp-for="death.senioritydate" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>PREVIOUS SERVICE FROM</label>
                                                                        <input asp-for="death.Prevsrv_from" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>PREVIOUS SERVICE TO</label>
                                                                        <input asp-for="death.Prevsrv_To" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>PREVIOUS ESTABLISHMENT</label>
                                                                        <input asp-for="death.PrvEstab" class="form-control" type="email" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>AUTHORITY FOR TRANSFER OF SERVICE</label>
                                                                        <input asp-for="death.PrvAuthor" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>ENLISTMENT DATE</label>
                                                                        <input asp-for="death.PrvEnListDate" class="form-control" >
                                                                    </div>
                                                                </div>
                    
                                                            </div>

                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>DATE OF DEATH</label>
                                                                        <input asp-for="death.Deathdate" class="form-control">
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>CAUSE OF DEATH</label>
                                                                        <input asp-for="death.DeathReason" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>DEATH CONFIRMATION BY SHIP</label>
                                                                        <input asp-for="death.DeathConfirm" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>TRADE CLASSIFICATION</label>
                                                                        <input asp-for="death.TradeClass" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>PRE-WAR SERVICE FROM</label>
                                                                        <input asp-for="death.Prvwar_from" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>PRE-WAR SERVICE TO</label>
                                                                        <input asp-for="death.Prvwar_to" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                          
                                                        </div>
                                                        <div class="tab-pane" role="tabpanel" id="step2">
                                                            <h4 class="text-center">Step 2</h4>
                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>WAR SERVICE FROM</label>
                                                                        <input asp-for="death.Warsrv_from" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>WAR SERVICE TO</label>
                                                                        <input asp-for="death.Warsrv_to" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>POST-WAR SERVICE FROM</label>
                                                                        <input asp-for="death.Postwar_from" class="form-control" type="email" name="name" placeholder="">
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>POST-WAR SERVICE TO</label>
                                                                        <input asp-for="death.Postwar_to" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>NON-RECKONABLE SERVICE</label>
                                                                        <input asp-for="death.Nonrec_Service" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>TOTAL RECKONABLE SERVICE</label>
                                                                        <input asp-for="death.Totalrec_Service" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>SUB-TREASURY</label>
                                                                        <input asp-for="death.SubTreasury" class="form-control">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>NEXT-OF-KIN NAME</label>
                                                                        <input asp-for="death.NOKName" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>NEXT-OF-KIN ADDRESS</label>
                                                                        <input asp-for="death.NOKAdress" class="form-control">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>TOTAL QUALIFYING SERVICE</label>
                                                                        <input asp-for="death.Totalgratuity" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                           
                                                        </div>
                                                        <div class="tab-pane" role="tabpanel" id="step3">
                                                            <h4 class="text-center">Step 3</h4>
                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>BASIC SALARY</label>
                                                                        <input asp-for="death.PresentBasicSal" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>UTILITY ALLOWANCE</label>
                                                                        <input asp-for="death.AnnualDiving" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>TRANSPORT ALLOWANCE</label>
                                                                        <input asp-for="death.AnnualGCB" class="form-control" type="email" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>ANNUAL LODGING ALLOWANCE</label>
                                                                        <input asp-for="death.AnnualLodging" class="form-control" >
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>MEAL SUBSIDY ALLOWANCE</label>
                                                                        <input asp-for="death.AnnualDMeal" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>ANNUAL ENTERTAINMENT  ALLOWANCE</label>
                                                                        <input asp-for="death.AnnualEntertain" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>PERSONAL SERVICE ALLOWANCE</label>
                                                                        <input asp-for="death.AnnualPersonal" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>TOTAL ANNUAL GROSS</label>
                                                                        <input asp-for="death.TotAnnualGross" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>CASH ADVANCE</label>
                                                                        <input asp-for="death.CashAdvance" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>MOTOR VEHICLE ADVANCE</label>
                                                                        <input asp-for="death.MotorVehicle" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>REDUCED INTREST ON ADVANCE</label>
                                                                        <input asp-for="death.ReducedInterest" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>HOUSING LOAN</label>
                                                                        <input asp-for="death.HousingLoan" class="form-control" type="email" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                           
                                                        </div>
                                                        <div class="tab-pane" role="tabpanel" id="step4">
                                                            <h4 class="text-center">Step 4</h4>
                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>REDUCED INTREST ON ADVANCE</label>
                                                                        <input asp-for="death.ReducedInterest2" class="form-control"  disabled="disabled">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>OTHER SUB CHARGES</label>
                                                                        <input asp-for="death.OtherSubCharge" class="form-control"  disabled="disabled">
                                                                    </div>
                                                                </div>
                                                              
                                                            </div>
                                                          
                                                        </div>

                                                        <div style="overflow:auto;">
                                                            <div style="float:right;">
                                                                <button type="button" class="btn-primary" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
                                                                <button type="button" class="btn-success" id="nextBtn" onclick="nextPrev(1)">Next</button>
                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                    </div>

                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                       
                    </form>

                </div>
            </div>
        </div>

    </div>
</div>



@section scripts
    {
        <script type="text/javascript">
        $(document).ready(function () {

            var currentTab = 0; // Current tab is set to be the first tab (0)
            showTab(currentTab);

        });

        function getDeath(id) {
                $.ajax({
                    method: "GET",
                    url: `/api/Death/GetDeathByPersonID?personID=${id}`,
                    success: function (data) {
                        console.log(data);
                        $('#death_FirstName').val(data.firstName);
                        $('#death_LastName').val(data.lastName);
                        $('#death_Title').val(data.title);
                        $('#death_SVC_NO').val(data.svC_NO);
                        $('#death_MiddleName').val(data.middleName);
                        $('#death_ShipEstab').val(data.shipEstab);
                        $('#death_BirthDate').val(data.birthDate);
                        $('#death_senioritydate').val(data.senioritydate);
                        $('#death_Prevsrv_from').val(data.prevsrv_from);
                        $('#death_Prevsrv_To').val(data.prevsrv_To);
                        $('#death_PrvAuthor').val(data.prvAuthor);
                        $('#death_PrvEnListDate').val(data.prvEnListDate);
                        $('#death_Deathdate').val(data.deathdate);
                        $('#death_DeathReason').val(data.deathReason);
                        $('#death_DeathConfirm').val(data.deathConfirm);
                        $('#death_TradeClass').val(data.tradeClass);
                        $('#death_Prvwar_from').val(data.prvwar_from);
                        $('#death_Prvwar_to').val(data.prvwar_to);
                        $('#death_Nonrec_Service').val(data.warsrv_from);
                        $('#death_Totalrec_Service').val(data.totalrec_Service);
                        $('#death_SubTreasury').val(data.subTreasury);
                        $('#death_NOKName').val(data.nOKName);
                        $('#death_NOKAdress').val(data.nOKAdress);
                        $('#death_Totalgratuity').val(data.totalgratuity);
                        $('#death_PresentBasicSal').val(data.presentBasicSal);
                        $('#death_AnnualDiving').val(data.annualDiving);
                        $('#death_AnnualGCB').val(data.annualGCB);
                        $('#death_AnnualLodging').val(data.annualLodging);
                        $('#death_AnnualDMeal').val(data.annualDMeal);
                        $('#death_AnnualEntertain').val(data.annualEntertain);
                        $('#death_AnnualPersonal').val(data.annualPersonal);
                        $('#death_TotAnnualGross').val(data.totAnnualGross);
                        $('#death_CashAdvance').val(data.cashAdvance);
                        $('#death_MotorVehicle').val(data.motorVehicle);
                        $('#death_ReducedInterest').val(data.reducedInterest);
                        $('#death_HousingLoan').val(data.housingLoan);
                        $('#death_ReducedInterest2').val(data.reducedInterest2);
                        $('#death_OtherSubCharge').val(data.otherSubCharge);
                        $('#death_PrvEstab').val(data.prvEstab);
                        $('#death.Warsrv_from').val(data.warsrv_from);
                        $('#death.Warsrv_to').val(data.warsrv_to);
                        $('#death.Postwar_from').val(data.postwar_from);
                        $('#death.Postwar_to').val(data.postwar_to);
                        $('#death.Nonrec_Service').val(data.nonrec_Service);
                        


                        $('#exampleModal').modal('show');
                    }
                });
            }

        function showTab(n) {
            // This function will display the specified tab of the form...
            var x = document.getElementsByClassName("tab-pane");

            console.log(n);
            x[n].style.display = "block";
            //... and fix the Previous/Next buttons:
            if (n == 0) {
                document.getElementById("prevBtn").style.display = "none";
            } else {
                document.getElementById("prevBtn").style.display = "inline";
            }
            if (n == (x.length - 1)) {
                document.getElementById("nextBtn").innerHTML = "Submit";
            } else {
                document.getElementById("nextBtn").innerHTML = "Next";
            }

            $('#currentTabId').val(n);

        }


        function nextPrev(n) {
            // This function will figure out which tab to display
            var x = document.getElementsByClassName("tab-pane");
            // Exit the function if any field in the current tab is invalid:
            //if (n == 1 && !validateForm()) return false;
            // Hide the current tab:
            var currentTab = Number($('#currentTabId').val());

            x[currentTab].style.display = "none";
            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
            // if you have reached the end of the form...

            // Otherwise, display the correct tab:
            showTab(currentTab);

        }

        
        </script>
 }


