@model NNPEFWEB.Models.PensionModel

@{
    ViewData["Title"] = "PensionReview";
    Layout = "~/Views/Shared/_gratuityLayout.cshtml";
}

<div class="card" style="width:100%;">
    <div class="card-header">
        <h1>Pension Review</h1>
    </div>
    <div class="card-body">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Fullname</th>
                    <th>ServiceNo</th>
                    <th>Rank</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @{

                    string fullname = "";

                    @foreach (var k in Model.Pensions)
                    {
                        fullname = k.LastName + " " + k.FirstName;
                        <tr>
                            <td>@fullname</td>
                            <td>@k.SVC_NO</td>
                            <td>@k.Title</td>
                            <td>
                                <a onclick="getPension(@k.PersonID)"
                                   class="btn btn-primary">
                                    Preview
                                </a>
                            </td>
                        </tr>
                    }
                }

            </tbody>
        </table>

        @*<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <form id="savePension" method="post">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Pension Preview</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <section class="signup-step-container">
                                <div class="container">
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-md-8">
                                            <div class="wizard">
                                                <div class="wizard-inner">
                                                    <div class="connecting-line"></div>
                                                    <ul class="nav nav-tabs" role="tablist">
                                                        <li role="presentation" class="active">
                                                            <a href="#step1" data-toggle="tab" aria-controls="step1" role="tab" aria-expanded="true"><span class="round-tab">1 </span> <i>Step 1</i></a>
                                                        </li>
                                                        <li role="presentation" class="disabled">
                                                            <a href="#step2" data-toggle="tab" aria-controls="step2" role="tab" aria-expanded="false"><span class="round-tab">2</span> <i>Step 2</i></a>
                                                        </li>
                                                        <li role="presentation" class="disabled">
                                                            <a href="#step3" data-toggle="tab" aria-controls="step3" role="tab"><span class="round-tab">3</span> <i>Step 3</i></a>
                                                        </li>
                                                        <li role="presentation" class="disabled">
                                                            <a href="#step4" data-toggle="tab" aria-controls="step4" role="tab"><span class="round-tab">4</span> <i>Step 4</i></a>
                                                        </li>
                                                    </ul>
                                                </div>

                                                <form role="form" action="index.html" class="login-box">
                                                    <input id="currentTabId" type="hidden" />
                                                    <div class="tab-content" id="main_form">
                                                        <div class="tab-pane active" role="tabpanel" id="step1">
                                                            <h4 class="text-center">Step 1</h4>
                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>SERVICENO</label>
                                                                        <input asp-for="pension.SVC_NO" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>FIRSTNAME</label>
                                                                        <input asp-for="pension.FirstName" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>LASTNAME</label>
                                                                        <input asp-for="pension.LastName" class="form-control" type="email" name="name" placeholder="">
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>MIDDLENAME</label>
                                                                        <input asp-for="pension.MiddleName" class="form-control" placeholder="">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>RANK</label>
                                                                        <input asp-for="pension.Title" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>PRESENT SHIP</label>
                                                                        <input asp-for="pension.ShipEstab" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>DATE OF BIRTH</label>
                                                                        <input asp-for="pension.BirthDate" class="form-control" type="date" id="BirthDate" name="name" placeholder="">
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>SENIORITY RATE</label>
                                                                        <input asp-for="pension.senioritydate" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>TRADE CATEGORY</label>
                                                                        <input asp-for="pension.Tradecategory" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>TRADE CATEGORY DATE</label>
                                                                        <input asp-for="pension.TradeCatDate" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>PREVIOUS SERVICE</label>
                                                                        <input asp-for="pension.PrvEstab" class="form-control" type="email" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>PREVIOUS ESTABLISHMENT</label>
                                                                        <input asp-for="pension.PrvShipEstab" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>ENLISTMENT DATE</label>
                                                                        <input asp-for="pension.Enlistmentdate" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>PRESENT SERVICE FROM</label>
                                                                        <input asp-for="pension.PreServicefrom" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>PRESENT SERVICE TO</label>
                                                                        <input asp-for="pension.PreServiceTo" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>DATE OF DISCHARGE/AUTHORITY</label>
                                                                        <input asp-for="pension.PrvServdate" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>WAR SERVICE FROM</label>
                                                                        <input asp-for="pension.Warsrv_from" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>WAR SERVICE TO</label>
                                                                        <input asp-for="pension.Warsrv_to" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>TOTAL LENGTH OF SERVICE</label>
                                                                        <input asp-for="pension.TotalService" class="form-control">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="tab-pane" role="tabpanel" id="step2">
                                                            <h4 class="text-center">Step 2</h4>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>NON-RECKONABLE SERVICE</label>
                                                                        <input asp-for="pension.Nonrec_Service" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>NON-RECKONABLE SERVICE REASON</label>
                                                                        <input asp-for="pension.NonRecReason" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>SERVICE AUTHORITY</label>
                                                                        <input asp-for="pension.TransAuthority" class="form-control" type="email" name="name" placeholder="">
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>PENSION LENGTH OF SERVICE</label>
                                                                        <input asp-for="pension.FinTotalService" class="form-control">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>PENSION DATE</label>
                                                                        <input asp-for="pension.PensionDate" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>PAYMENT DEPARTMENT</label>
                                                                        <input asp-for="pension.PaymentDept" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>PERMANENT ADDRESS</label>
                                                                        <input asp-for="pension.PAddress" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>CONTACT ADDRESS</label>
                                                                        <input asp-for="pension.CAddress" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>NATURE OF DISABILITY</label>
                                                                        <input asp-for="pension.DisabilityNat" class="form-control" type="email" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>DEGREE OF DISABILITY</label>
                                                                        <input asp-for="pension.DisabilityDegree" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>DISABILITY DATE</label>
                                                                        <input asp-for="pension.DisabilityDate" class="form-control" placeholder="">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="tab-pane" role="tabpanel" id="step3">
                                                            <h4 class="text-center">Step 3</h4>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>ANNUAL BASIC SALARY</label>
                                                                        <input asp-for="pension.AnnualBasic" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>ANNUAL TRANSPORT ALLOWANCE</label>
                                                                        <input asp-for="pension.AnnualTrans" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>ANNUAL LODGING ALLOWANCE</label>
                                                                        <input asp-for="pension.AnnualLodging" class="form-control" type="email" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>PERSONAL SERVANT ALLOWANCE</label>
                                                                        <input asp-for="pension.AnnualServant" class="form-control" >
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>MEAL SUBSIDY ALLOWANCE</label>
                                                                        <input asp-for="pension.AnnualMeal" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>ANNUAL ENTERTAINMENT  ALLOWANCE</label>
                                                                        <input asp-for="pension.AnnualEnter" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>ANNUAL UTILITY ALLOWANCE</label>
                                                                        <input asp-for="pension.AnnualUtility" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>HOUSE UPKEEP ALLOWANCE</label>
                                                                        <input asp-for="pension.AnnualHouse" class="form-control" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>GENERAL SVC ALLOWANCE</label>
                                                                        <input asp-for="pension.AnnualGeneral" class="form-control" >
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>ANNUAL MEDICAL ALLOWANCE</label>
                                                                        <input asp-for="pension.AnnualMedical" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>ANNUAL HAZARD ALLOWANCE</label>
                                                                        <input asp-for="pension.AnnualUtlity" class="form-control" type="text" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>UNIFORM UPKEEP ALLOWANCE</label>
                                                                        <input asp-for="pension.AnnualUniform" class="form-control" type="email" name="name" placeholder="">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                           
                                                        </div>
                                                        <div class="tab-pane" role="tabpanel" id="step4">
                                                            <h4 class="text-center">Step 4</h4>
                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>TOTAL EMOLUMENT</label>
                                                                        <input asp-for="pension.TotalEmolument" class="form-control" type="text" name="name" placeholder="" disabled="disabled">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>QUALIFYING SERVICE FOR GRATUITY</label>
                                                                        <input asp-for="pension.TotalQualify" class="form-control" type="text" name="name" placeholder="" disabled="disabled">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>FREE SERVICE ELEMENTS</label>
                                                                        <input asp-for="pension.FreeSevcElement" class="form-control" type="text" name="name" placeholder="" disabled="disabled">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>HOUSING/LAND LOAN</label>
                                                                        <input asp-for="pension.Housing_Loan" class="form-control" type="text" name="name" placeholder="" disabled="disabled">
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>MOTOR VEHICLE ADVANCE</label>
                                                                        <input asp-for="pension.Motor_Loan" class="form-control" type="text" name="name" placeholder="" disabled="disabled">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>MOTOR CYCLE ALLOWANCE</label>
                                                                        <input asp-for="pension.MCycle_Loan" class="form-control" type="text" name="name" placeholder="" disabled="disabled">
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <label>WELFARE LOAN</label>
                                                                        <input asp-for="pension.Welfare_Loan" class="form-control" type="text" name="name" placeholder="" disabled="disabled">
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-5">
                                                                    <div class="form-group">
                                                                        <label>COOPERATIVE PERSONAL LOAN</label>
                                                                        <input asp-for="pension.Coop_Loan" class="form-control" type="text" name="name" placeholder="" disabled="disabled">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>MICROFINANCE BANK LOAN</label>
                                                                        <input asp-for="pension.MFinance_Loan" class="form-control" type="text" name="name" placeholder="" disabled="disabled">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>OVERPAYMENT OF SALARY</label>
                                                                        <input asp-for="pension.SalaryOverpayment" class="form-control" type="text" name="name" placeholder="" disabled="disabled">
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <div class="form-group">
                                                                        <label>OTHER SUB CHARGES</label>
                                                                        <input asp-for="pension.Other_Overcharge" class="form-control" type="text" name="name" placeholder="" disabled="disabled">
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        
                                                        </div>

                                                        <div style="overflow:auto;">
                                                            <div style="float:right;">
                                                                <button type="button" class="btn-primary" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
                                                                <button type="button" class="btn-success" id="nextBtn" onclick="nextPrev(1)">Next</button>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="button" id="btnUpdate" class="btn btn-primary">Save</button>
                        </div>
                    </form>

                </div>
            </div>
        </div>*@

    </div>
</div>



@section scripts
    {
    <script type="text/javascript">
        $(document).ready(function () {

            var currentTab = 0; // Current tab is set to be the first tab (0)
            showTab(currentTab);

        });

        function getPension(id) {
            $.ajax({
                method: "GET",
                url: `/api/Pension/GetPensionByPersonID?personID=${id}`,
                success: function (data) {
                    alert("i am here");
                    console.log(data);
                    console.log("i am here");
                    console.log(data.birthDate);
                    $('#pension_FirstName').val(data.firstName);
                    $('#pension_LastName').val(data.lastName);
                    $('#pension_Title').val(data.title);
                    $('#pension_SVC_NO').val(data.svC_NO);
                    $('#pension_MiddleName').val(data.middleName);
                    $('#pension_ShipEstab').val(data.shipEstab);
                    $('#pension_BirthDate').val(data.birthDate);
                    $('#pension_senioritydate').val(data.senioritydate);
                    $('#pension_Tradecategory').val(data.tradecategory);
                    $('#pension_TradeCatDate').val(data.tradeCatDate);
                    $('#pension_PrvEstab').val(data.prvEstab);
                    $('#pension_PrvShipEstab').val(data.prvShipEstab);
                    $('#pension_Enlistmentdate').val(data.enlistmentdate);
                    $('#pension_PreServicefrom').val(data.preServicefrom);
                    $('#pension_PreServiceTo').val(data.preServiceTo);
                    $('#pension_PrvServdate').val(data.prvServdate);
                    $('#pension_Warsrv_from').val(data.warsrv_from);
                    $('#pension_Warsrv_to').val(data.warsrv_to);
                    $('#pension_TotalService').val(data.totalService);
                    $('#pension_Nonrec_Service').val(data.nonrec_Service);
                    $('#pension_NonRecReason').val(data.nonRecReason);
                    $('#pension_TransAuthority').val(data.transAuthority);
                    $('#pension_FinTotalService').val(data.finTotalService);
                    $('#pension_pensionDate').val(data.pensionDate);
                    $('#pension_PaymentDept').val(data.paymentDept);
                    $('#pension_PAddress').val(data.pAddress);
                    $('#pension_CAddress').val(data.cAddress);
                    $('#pension_DisabilityNat').val(data.disabilityNat);
                    $('#pension_DisabilityDegree').val(data.disabilityDegree);
                    $('#pension_DisabilityDate').val(data.disabilityDate);
                    $('#pension_AnnualBasic').val(data.annualBasic);
                    $('#pension_AnnualTransport').val(data.annualTransport);
                    $('#pension_AnnualLodging').val(data.annualLodging);
                    $('#pension_AnnualServant').val(data.annualServant);
                    $('#pension_AnnualMeal').val(data.annualMeal);
                    $('#pension_AnnualEnter').val(data.annualEnter);
                    $('#pension_AnnualUtility').val(data.annualUtility);
                    $('#pension_AnnualHouse').val(data.annualHouse);
                    $('#pension_AnnualGeneral').val(data.annualGeneral);
                    $('#pension_AnnualMedical').val(data.annualMedical);
                    $('#pension_AnnualUtlity').val(data.annualUtlity);
                    $('#pension_AnnualUniform').val(data.annualUniform);
                    $('#pension_TotalEmolument').val(data.totalEmolument);
                    $('#pension_TotalQualify').val(data.totalQualify);
                    $('#pension_FreeSevcElement').val(data.freeSevcElement);
                    $('#pension_Housing_Loan').val(data.housing_Loan);
                    $('#pension_Motor_Loan').val(data.motor_Loan);
                    $('#pension_MCycle_Loan').val(data.mCycle_Loan);
                    $('#pension_Welfare_Loan').val(data.welfare_Loan);
                    $('#pension_Coop_Loan').val(data.coop_Loan);
                    $('#pension_MFinance_Loan').val(data.mFinance_Loan);
                    $('#pension_SalaryOverpayment').val(data.salaryOverpayment);
                    $('#pension_Other_Overcharge').val(data.other_Overcharge);

                    $('#exampleModal').modal('show');
                }
            });
        }

        function showTab(n) {
            // This function will display the specified tab of the form...
            var x = document.getElementsByClassName("tab-pane");

            console.log(n);
            x[n].style.display = "block";
            //... and fix the Previous/Next buttons:
            if (n == 0) {
                document.getElementById("prevBtn").style.display = "none";
            } else {
                document.getElementById("prevBtn").style.display = "inline";
            }
            if (n == (x.length - 1)) {
                document.getElementById("nextBtn").innerHTML = "Submit";
            } else {
                document.getElementById("nextBtn").innerHTML = "Next";
            }

            $('#currentTabId').val(n);

        }


        function nextPrev(n) {
            // This function will figure out which tab to display
            var x = document.getElementsByClassName("tab-pane");
            // Exit the function if any field in the current tab is invalid:
            //if (n == 1 && !validateForm()) return false;
            // Hide the current tab:
            var currentTab = Number($('#currentTabId').val());

            x[currentTab].style.display = "none";
            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
            // if you have reached the end of the form...

            // Otherwise, display the correct tab:
            showTab(currentTab);

        }


    </script>
 }



